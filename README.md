# AES Шифратор/Дешифратор
Эта программа шифрует и расшифровывает файлы, используя алгоритм AES (Advanced Encryption Standard). Она считывает входной файл, выполняет указанную операцию (шифрование или дешифрование) и записывает результат в выходной файл.

## Использование
1. **Скомпилируйте программу**:
    ```bash
    gcc -o aes_encryptor aes_encryptor.c
    ```

2. **Запустите программу**:
    ```bash
    ./aes_encryptor
    ```

## Работа программы
1. Программа запрашивает у пользователя имя входного файла.
2. Затем программа запрашивает у пользователя имя выходного файла.
3. Программа предлагает пользователю выбрать операцию:
    - Введите `1` для шифрования.
    - Введите `2` для дешифрования.
4. При шифровании генерируется и отображается случайный ключ.
5. При дешифровании пользователь должен ввести ключ, использованный при шифровании.
6. Программа считывает входной файл, обрабатывает его блок за блоком и записывает результат в выходной файл.


## Подробные шаги

1. **Имена входного и выходного файлов**:

   Программа запрашивает имена входного и выходного файлов:
    ```c
    printf("Введите имя входного файла: ");
    scanf("%255s", inputFilename);
    printf("Введите имя выходного файла: ");
    scanf("%255s", outputFilename);
    ```


2. **Выбор операции**:

   Пользователь выбирает шифрование или дешифрование файла:
    ```c
    printf("Выберите операцию (1 - Шифрование, 2 - Дешифрование): ");
    scanf("%d", &operationChoice);
    ```


3. **Работа с ключом**:

    - При шифровании генерируется и отображается случайный ключ.
    - При дешифровании пользователь вводит ключ:
    ```c
    if (operationChoice == 1) {
        printf("Сгенерированный ключ (используйте для дешифрования): ");
        srand(time(NULL));
        for (int i = 0; i < BLOCK_SIZE; i++) {
            key[i] = rand() % 256;
            printf("%2x ", key[i]);
        }
    } else if (operationChoice == 2) {
        printf("Введите ключ: ");
        for (int i = 0; i < BLOCK_SIZE; i++) {
            unsigned int byte;
            scanf("%2x", &byte);
            key[i] = (uint8_t)byte;
        }
    }
    ```


4. **Работа с файлами**:

   Программа открывает входной и выходной файлы для чтения и записи:
    ```c
    FILE* inputFile = fopen(inputFilename, "rb");
    FILE* outputFile = fopen(outputFilename, "wb");
    ```


5. **Расширение ключа**:

   Выполняется расширение ключа AES:
    ```c
    keyExpansion(key, roundKeys);
    ```


6. **Обработка блоков**:

   Программа считывает блоки из входного файла, шифрует или дешифрует их и записывает в выходной файл:
    ```c
    while ((length = fread(block, 1, BLOCK_SIZE, inputFile)) > 0) {
        if (operationChoice == 1) {
            if (length < BLOCK_SIZE) {
                memset(block + length, 0, BLOCK_SIZE - length);
                length = BLOCK_SIZE;
            }
            encryptBlock(block, roundKeys);
        } else if (operationChoice == 2) {
            decryptBlock(block, roundKeys);
            while (length > 0 && block[length - 1] == 0) {
                length--;
            }
        }
        fwrite(block, 1, length, outputFile);
    }
    ```


## Обработка ошибок
Программа проверяет наличие ошибок при открытии файлов, чтении и записи данных. В случае ошибок выводятся соответствующие сообщения об ошибках с помощью `fprintf`, и программа завершает работу с `EXIT_FAILURE`.


## Примечания
- Размер ключа должен соответствовать 16 байт.
- Программа использует дополнение данных при шифровании и удаляет его при дешифровании.


## Автор
### Зеленков Никита


Следуя инструкциям и понимая работу программы, вы сможете эффективно использовать этот AES шифратор/дешифратор для шифрования и дешифрования ваших файлов.